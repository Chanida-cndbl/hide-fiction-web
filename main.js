// à¸ªà¸„à¸£à¸´à¸›à¸•à¹Œà¸„à¸§à¸šà¸„à¸¸à¸¡à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™à¸‚à¸­à¸‡à¸›à¸¸à¹ˆà¸¡
    let mybutton = document.getElementById("btn-back-to-top");

    // à¹€à¸¡à¸·à¹ˆà¸­à¹€à¸¥à¸·à¹ˆà¸­à¸™à¸«à¸™à¹‰à¸²à¸ˆà¸­à¸¥à¸‡à¸¡à¸² 300px à¹ƒà¸«à¹‰à¹‚à¸Šà¸§à¹Œà¸›à¸¸à¹ˆà¸¡
    window.onscroll = function () {
        scrollFunction();
    };

    function scrollFunction() {
        if (
            document.body.scrollTop > 300 ||
            document.documentElement.scrollTop > 300
        ) {
            mybutton.style.display = "block"; // à¹‚à¸Šà¸§à¹Œ
        } else {
            mybutton.style.display = "none"; // à¸‹à¹ˆà¸­à¸™
        }
    }

    // à¹€à¸¡à¸·à¹ˆà¸­à¸à¸”à¸›à¸¸à¹ˆà¸¡ à¹ƒà¸«à¹‰à¹€à¸¥à¸·à¹ˆà¸­à¸™à¸à¸¥à¸±à¸šà¹„à¸›à¸‚à¹‰à¸²à¸‡à¸šà¸™à¹à¸šà¸šà¸™à¸¸à¹ˆà¸¡à¸™à¸§à¸¥ (Smooth Scroll)
    mybutton.addEventListener("click", backToTop);

    function backToTop() {
        window.scrollTo({
            top: 0,
            behavior: "smooth" // à¹€à¸¥à¸·à¹ˆà¸­à¸™à¸‚à¸¶à¹‰à¸™à¹à¸šà¸šà¸ªà¸¡à¸¹à¸— à¹„à¸¡à¹ˆà¸à¸£à¸°à¸Šà¸²à¸
        });
    }
	
	/* =========================================
   à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸ªà¸¸à¹ˆà¸¡à¸¥à¸³à¸”à¸±à¸šà¸™à¸´à¸¢à¸²à¸¢ (Random Shuffle)
   ========================================= */
document.addEventListener("DOMContentLoaded", function() {
    // 1. à¸«à¸²à¸•à¸°à¸à¸£à¹‰à¸²à¸—à¸µà¹ˆà¹ƒà¸ªà¹ˆà¸™à¸´à¸¢à¸²à¸¢à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
    const grid = document.getElementById("novel-grid");
    
    // à¸–à¹‰à¸²à¸«à¸²à¹„à¸¡à¹ˆà¹€à¸ˆà¸­ (à¹€à¸Šà¹ˆà¸™à¸­à¸¢à¸¹à¹ˆà¸«à¸™à¹‰à¸²à¸­à¸·à¹ˆà¸™) à¹ƒà¸«à¹‰à¸ˆà¸šà¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™
    if (!grid) return;

    // 2. à¸”à¸¶à¸‡à¸à¸²à¸£à¹Œà¸”à¸™à¸´à¸¢à¸²à¸¢à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¸­à¸­à¸à¸¡à¸²à¹€à¸›à¹‡à¸™à¹„à¸žà¹ˆ 1 à¸à¸­à¸‡ (Array)
    const cards = Array.from(grid.children);

    // 3. à¹€à¸£à¸´à¹ˆà¸¡à¸ªà¸¥à¸±à¸šà¹„à¸žà¹ˆ! (à¹ƒà¸Šà¹‰à¸ªà¸¹à¸•à¸£ Fisher-Yates Shuffle à¹€à¸žà¸·à¹ˆà¸­à¹ƒà¸«à¹‰à¸ªà¸¸à¹ˆà¸¡à¸—à¸±à¹ˆà¸§à¸–à¸¶à¸‡à¸ˆà¸£à¸´à¸‡à¹†)
    for (let i = cards.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [cards[i], cards[j]] = [cards[j], cards[i]]; // à¸ªà¸¥à¸±à¸šà¸—à¸µà¹ˆà¸à¸±à¸™
    }

    // 4. à¹€à¸­à¸²à¹„à¸žà¹ˆà¸—à¸µà¹ˆà¸ªà¸±à¸šà¹€à¸ªà¸£à¹‡à¸ˆà¹à¸¥à¹‰à¸§ à¸¢à¸±à¸”à¸à¸¥à¸±à¸šà¹ƒà¸ªà¹ˆà¸•à¸°à¸à¸£à¹‰à¸²à¸—à¸µà¸¥à¸°à¹ƒà¸š
    cards.forEach(card => {
        grid.appendChild(card);
    });
});

// à¸„à¹‰à¸™à¸«à¸²à¸›à¸¸à¹ˆà¸¡
const themeToggleBtn = document.getElementById('btn-toggle-theme');
const body = document.body;

// à¹€à¸Šà¹‡à¸„à¸§à¹ˆà¸²à¹€à¸„à¸¢à¹€à¸¥à¸·à¸­à¸ Dark Mode à¹„à¸§à¹‰à¹„à¸«à¸¡? (à¸ˆà¸²à¸ LocalStorage)
const currentTheme = localStorage.getItem('theme');

// à¸–à¹‰à¸²à¹€à¸„à¸¢à¹€à¸¥à¸·à¸­à¸ 'dark' à¹ƒà¸«à¹‰à¹€à¸›à¸´à¸” Dark Mode à¸—à¸±à¸™à¸—à¸µà¸•à¸­à¸™à¹‚à¸«à¸¥à¸”à¹€à¸§à¹‡à¸š
if (currentTheme === 'dark') {
    body.classList.add('dark-mode');
    themeToggleBtn.innerText = 'â˜€ï¸'; // à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹„à¸­à¸„à¸­à¸™à¹€à¸›à¹‡à¸™à¸”à¸§à¸‡à¸­à¸²à¸—à¸´à¸•à¸¢à¹Œ
}

// à¹€à¸¡à¸·à¹ˆà¸­à¸à¸”à¸›à¸¸à¹ˆà¸¡
themeToggleBtn.addEventListener('click', () => {
    body.classList.toggle('dark-mode');
    
    // à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸§à¹ˆà¸²à¸•à¸­à¸™à¸™à¸µà¹‰à¹€à¸›à¹‡à¸™ Dark Mode à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ
    if (body.classList.contains('dark-mode')) {
        themeToggleBtn.innerText = 'â˜€ï¸'; // à¹„à¸­à¸„à¸­à¸™à¸ªà¸§à¹ˆà¸²à¸‡
        localStorage.setItem('theme', 'dark'); // à¸šà¸±à¸™à¸—à¸¶à¸à¸„à¹ˆà¸²
    } else {
        themeToggleBtn.innerText = 'ðŸŒ™'; // à¹„à¸­à¸„à¸­à¸™à¸¡à¸·à¸”
        localStorage.setItem('theme', 'light'); // à¸šà¸±à¸™à¸—à¸¶à¸à¸„à¹ˆà¸²
    }
});

/* =========================================
   RANDOM HERO SECTION (à¸ªà¸¸à¹ˆà¸¡à¸™à¸´à¸¢à¸²à¸¢à¹à¸™à¸°à¸™à¸³)
   ========================================= */

// 1. à¸ªà¸£à¹‰à¸²à¸‡à¸„à¸¥à¸±à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸™à¸´à¸¢à¸²à¸¢ (à¸­à¸¢à¸²à¸à¹€à¸žà¸´à¹ˆà¸¡à¹€à¸£à¸·à¹ˆà¸­à¸‡à¹„à¸«à¸™ à¹ƒà¸ªà¹ˆà¹€à¸žà¸´à¹ˆà¸¡à¹ƒà¸™à¸™à¸µà¹‰à¹„à¸”à¹‰à¹€à¸¥à¸¢)
const heroNovels = [
    {
        title: "à¸Ÿà¹‰à¸­à¸‡à¹ƒà¸«à¹‰à¸¢à¸±à¸š à¸›à¸£à¸²à¸šà¹€à¸à¸£à¸µà¸¢à¸™à¸”à¹‰à¸§à¸¢à¸«à¸¡à¸²à¸¢à¸¨à¸²à¸¥",
        desc: "à¹€à¸¡à¸·à¹ˆà¸­à¸„à¸™à¸‚à¸±à¸šà¹à¸—à¹‡à¸à¸‹à¸µà¹ˆà¹„à¸”à¹‰à¸£à¸±à¸š 'à¸£à¸°à¸šà¸šà¸—à¸§à¸‡à¸„à¸§à¸²à¸¡à¸¢à¸¸à¸•à¸´à¸˜à¸£à¸£à¸¡' à¸‡à¸²à¸™à¸™à¸µà¹‰à¹„à¸¡à¹ˆà¸ªà¸™à¹„à¸à¸¥à¹ˆà¹€à¸à¸¥à¸µà¹ˆà¸¢ à¹„à¸¡à¹ˆà¸£à¸±à¸šà¸„à¸³à¸‚à¸­à¹‚à¸—à¸©... à¹€à¸›à¹‰à¸²à¸«à¸¡à¸²à¸¢à¸¡à¸µà¹€à¸žà¸µà¸¢à¸‡à¸«à¸™à¸¶à¹ˆà¸‡à¹€à¸”à¸µà¸¢à¸§ 'à¸ªà¹ˆà¸‡à¸žà¸§à¸à¹à¸à¸—à¸¸à¸à¸„à¸™à¹€à¸‚à¹‰à¸²à¸„à¸¸à¸à¸‹à¸°!'",
        image: "images/cover-story-09.jpg", // à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸Šà¸·à¹ˆà¸­à¹„à¸Ÿà¸¥à¹Œà¸£à¸¹à¸›à¹ƒà¸«à¹‰à¸•à¸£à¸‡
        link: "https://s.hidetr.work/hf42" // à¸¥à¸´à¸‡à¸à¹Œà¹„à¸›à¸¢à¸±à¸‡à¸«à¸™à¹‰à¸²à¸™à¸´à¸¢à¸²à¸¢à¸ˆà¸£à¸´à¸‡
    },
    {
        title: "à¸ªà¸¸à¸”à¸¢à¸­à¸”à¸‚à¸¢à¸°à¸«à¸¡à¸·à¹ˆà¸™à¸›à¸µ",
        desc: "à¸ˆà¸²à¸à¹€à¸”à¹‡à¸à¸«à¸™à¸¸à¹ˆà¸¡à¸—à¸µà¹ˆà¸–à¸¹à¸à¸•à¸£à¸²à¸«à¸™à¹‰à¸²à¸§à¹ˆà¸²à¹€à¸›à¹‡à¸™ 'à¸‚à¸¢à¸°' à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™à¸à¸¶à¸à¸à¸™à¹ƒà¸™à¸«à¸­à¸„à¸­à¸¢à¸›à¸£à¸´à¸¨à¸™à¸² à¸¡à¸¸à¹ˆà¸‡à¸¡à¸±à¹ˆà¸™à¸‰à¸µà¸à¸à¸Žà¸ªà¸§à¸£à¸£à¸„à¹Œ à¸à¹ˆà¸²à¸‚à¸µà¸”à¸ˆà¸³à¸à¸±à¸” à¸à¹‰à¸²à¸§à¸ªà¸¹à¹ˆà¸„à¸§à¸²à¸¡à¹€à¸›à¹‡à¸™à¸¢à¸­à¸”à¸¢à¸¸à¸—à¸˜à¹Œ!",
        image: "images/cover-story-02.jpg",
        link: "https://s.hidetr.work/hf02c"
    },
    {
        title: "à¸ªà¸±à¸•à¸§à¹Œà¹€à¸¥à¸µà¹‰à¸¢à¸‡à¸‚à¸­à¸‡à¸‰à¸±à¸™à¸„à¸·à¸­à¹€à¸—à¸žà¸¡à¸±à¸‡à¸à¸£",
        desc: "â€œà¹ƒà¸„à¸£à¸«à¸™à¹‰à¸²à¹„à¸«à¸™à¸¡à¸±à¸™à¸šà¸­à¸à¸§à¹ˆà¸²à¸™à¸±à¸à¸à¸¶à¸à¸¡à¸±à¸‡à¸à¸£à¹€à¸›à¹‡à¸™à¸­à¸²à¸Šà¸µà¸žà¸‚à¸¢à¸°à¸§à¸°!!?â€ à¸žà¸šà¸à¸±à¸šà¸à¸²à¸£à¸œà¸ˆà¸à¸ à¸±à¸¢à¸ªà¸¸à¸”à¸à¸²à¸§à¹à¸¥à¸°à¸¡à¸±à¸‡à¸à¸£à¸ªà¸¸à¸”à¹€à¸—à¸žà¸—à¸µà¹ˆà¸ˆà¸°à¸•à¸šà¹€à¸à¸£à¸µà¸¢à¸™à¹„à¸›à¸—à¸±à¹ˆà¸§à¸«à¸¥à¹‰à¸²",
        image: "images/cover-story-03.jpg",
        link: "https://s.hidetr.work/ZTATF"
    }
];

// 2. à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸ªà¸¸à¹ˆà¸¡à¹€à¸¥à¸·à¸­à¸à¸™à¸´à¸¢à¸²à¸¢
function randomHeroNovel() {
    // à¹€à¸Šà¹‡à¸„à¸à¹ˆà¸­à¸™à¸§à¹ˆà¸²à¹ƒà¸™à¸«à¸™à¹‰à¸²à¹€à¸§à¹‡à¸šà¸¡à¸µ Element à¹€à¸«à¸¥à¹ˆà¸²à¸™à¸µà¹‰à¹„à¸«à¸¡ (à¸à¸±à¸™ Error)
    const titleEl = document.getElementById('hero-title');
    const descEl = document.getElementById('hero-desc');
    const imgEl = document.getElementById('hero-img');
    const linkEl = document.getElementById('hero-link');

    if (titleEl && descEl && imgEl && linkEl) {
        // à¸ªà¸¸à¹ˆà¸¡à¸•à¸±à¸§à¹€à¸¥à¸‚ 0 à¸–à¸¶à¸‡ à¸ˆà¸³à¸™à¸§à¸™à¹€à¸£à¸·à¹ˆà¸­à¸‡à¸—à¸µà¹ˆà¸¡à¸µ
        const randomIndex = Math.floor(Math.random() * heroNovels.length);
        const selectedNovel = heroNovels[randomIndex];

        // à¹à¸—à¸™à¸—à¸µà¹ˆà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸‡à¹ƒà¸™ HTML
        titleEl.textContent = selectedNovel.title;
        descEl.textContent = selectedNovel.desc;
        imgEl.src = selectedNovel.image;
        linkEl.href = selectedNovel.link;
        
        // (à¸¥à¸¹à¸à¹€à¸¥à¹ˆà¸™à¹€à¸ªà¸£à¸´à¸¡) à¹ƒà¸ªà¹ˆ Fade In à¹€à¸šà¸²à¹† à¹ƒà¸«à¹‰à¸”à¸¹à¸™à¸¸à¹ˆà¸¡à¸™à¸§à¸¥
        imgEl.style.opacity = 0;
        setTimeout(() => { imgEl.style.opacity = 1; }, 100);
    }
}

// 3. à¸ªà¸±à¹ˆà¸‡à¹ƒà¸«à¹‰à¸—à¸³à¸‡à¸²à¸™à¸—à¸±à¸™à¸—à¸µà¹€à¸¡à¸·à¹ˆà¸­à¹‚à¸«à¸¥à¸”à¹€à¸§à¹‡à¸šà¹€à¸ªà¸£à¹‡à¸ˆ
document.addEventListener('DOMContentLoaded', randomHeroNovel);